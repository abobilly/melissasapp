<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floating Butterflies & Waterfall</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            height: 100vh;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #87CEEB, #98FB98, #87CEFA);
            position: relative;
        }

        /* Background Image Layer */
        .waterfall {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow: hidden;
        }

        .bg-image {
            position: absolute;
            inset: 0;
            background-image: url('outdoors.webp');
            background-size: cover; /* fill while preserving aspect */
            background-position: center center;
            background-repeat: no-repeat;
            transform: translateZ(0); /* promote to its own layer */
            will-change: transform, filter;
            z-index: 1;
            transition: filter 2s ease-in-out;
        }

        /* Removed old water stream/video styles */

        /* Butterfly Styles */
        .butterfly {
            position: absolute;
            width: 60px;
            height: 60px;
            z-index: 10;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .butterfly:hover {
            transform: scale(1.3);
        }

        .wing {
            position: absolute;
            border-radius: 50% 10% 50% 10%;
            animation: flutter 0.5s ease-in-out infinite alternate;
            position: relative;
        }

        .wing::before {
            content: '';
            position: absolute;
            top: 15%;
            left: 20%;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.3) 50%, transparent 70%);
            border-radius: 50%;
            z-index: 1;
        }

        .wing::after {
            content: '';
            position: absolute;
            top: 40%;
            left: 35%;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0.2) 60%, transparent 80%);
            border-radius: 50%;
            z-index: 1;
        }

        .left-wing {
            left: 0;
            top: 0;
            width: 20px;
            height: 25px;
            transform-origin: bottom right;
            background-image: 
                linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%),
                radial-gradient(ellipse at 30% 60%, rgba(0,0,0,0.1) 0%, transparent 50%);
        }

        .right-wing {
            right: 0;
            top: 0;
            width: 20px;
            height: 25px;
            transform-origin: bottom left;
            animation-delay: 0.1s;
            background-image: 
                linear-gradient(-45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%),
                radial-gradient(ellipse at 70% 60%, rgba(0,0,0,0.1) 0%, transparent 50%);
        }

        .body {
            position: absolute;
            left: 50%;
            top: 0;
            width: 4px;
            height: 30px;
            background: linear-gradient(180deg, #654321 0%, #8B4513 30%, #A0522D 60%, #8B4513 100%);
            border-radius: 50px;
            transform: translateX(-50%);
            z-index: 11;
            box-shadow: 0 0 3px rgba(0,0,0,0.3);
        }

        .body::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 50%;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #2F1B14 0%, #8B4513 70%);
            border-radius: 50%;
            transform: translateX(-50%);
        }

        .body::after {
            content: '';
            position: absolute;
            top: -2px;
            left: 50%;
            width: 2px;
            height: 8px;
            background: #654321;
            border-radius: 1px;
            transform: translateX(-50%);
        }

        @keyframes flutter {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(45deg); }
        }

        /* Different butterfly colors with realistic patterns */
        .butterfly-orange .wing {
            background: 
                radial-gradient(ellipse at 25% 25%, rgba(255,255,255,0.4) 0%, transparent 30%),
                radial-gradient(ellipse at 70% 80%, rgba(139,69,19,0.6) 0%, transparent 40%),
                radial-gradient(circle at 30% 30%, #FFD700, #FF8C00, #FF4500),
                linear-gradient(135deg, rgba(255,140,0,0.8) 0%, rgba(255,69,0,0.9) 100%);
            box-shadow: 0 0 15px rgba(255, 140, 0, 0.6);
        }

        .butterfly-blue .wing {
            background: 
                radial-gradient(ellipse at 25% 25%, rgba(255,255,255,0.5) 0%, transparent 25%),
                radial-gradient(ellipse at 60% 75%, rgba(0,0,139,0.7) 0%, transparent 35%),
                radial-gradient(circle at 30% 30%, #87CEEB, #4169E1, #0000CD),
                linear-gradient(135deg, rgba(65,105,225,0.8) 0%, rgba(0,0,205,0.9) 100%);
            box-shadow: 0 0 15px rgba(65, 105, 225, 0.6);
        }

        .butterfly-pink .wing {
            background: 
                radial-gradient(ellipse at 30% 20%, rgba(255,255,255,0.6) 0%, transparent 25%),
                radial-gradient(ellipse at 50% 80%, rgba(220,20,60,0.5) 0%, transparent 40%),
                radial-gradient(circle at 30% 30%, #FFB6C1, #FF69B4, #DC143C),
                linear-gradient(135deg, rgba(255,105,180,0.8) 0%, rgba(220,20,60,0.9) 100%);
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.6);
        }

        .butterfly-purple .wing {
            background: 
                radial-gradient(ellipse at 25% 30%, rgba(255,255,255,0.4) 0%, transparent 30%),
                radial-gradient(ellipse at 65% 70%, rgba(75,0,130,0.6) 0%, transparent 35%),
                radial-gradient(circle at 30% 30%, #DDA0DD, #9370DB, #8A2BE2),
                linear-gradient(135deg, rgba(147,112,219,0.8) 0%, rgba(138,43,226,0.9) 100%);
            box-shadow: 0 0 15px rgba(147, 112, 219, 0.6);
        }

        .butterfly-green .wing {
            background: 
                radial-gradient(ellipse at 20% 25%, rgba(255,255,255,0.5) 0%, transparent 25%),
                radial-gradient(ellipse at 70% 75%, rgba(34,139,34,0.7) 0%, transparent 40%),
                radial-gradient(circle at 30% 30%, #98FB98, #32CD32, #228B22),
                linear-gradient(135deg, rgba(50,205,50,0.8) 0%, rgba(34,139,34,0.9) 100%);
            box-shadow: 0 0 15px rgba(50, 205, 50, 0.6);
        }

        /* Floating animation */
        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg); 
            }
            25% { 
                transform: translateY(-20px) translateX(10px) rotate(5deg); 
            }
            50% { 
                transform: translateY(-10px) translateX(-15px) rotate(-3deg); 
            }
            75% { 
                transform: translateY(-25px) translateX(5px) rotate(2deg); 
            }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        /* Mist effect */
        .mist {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background: linear-gradient(0deg, 
                rgba(255,255,255,0.4) 0%, 
                rgba(255,255,255,0.1) 50%, 
                transparent 100%);
            z-index: 5;
            animation: mistMove 8s ease-in-out infinite;
        }

        @keyframes mistMove {
            0%, 100% { transform: translateX(0px); opacity: 0.4; }
            50% { transform: translateX(20px); opacity: 0.6; }
        }

        /* Sparkle effects */
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            z-index: 15;
            animation: sparkleAnim 3s ease-in-out infinite;
        }

        @keyframes sparkleAnim {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* Evil mode styles */
        .evil-mode {
            background: linear-gradient(135deg, #8B0000, #DC143C, #B22222) !important;
            transition: background 2s ease-in-out;
        }

        .evil-mode .waterfall { transition: all 2s ease-in-out; }
        .evil-mode .bg-image {
            filter: hue-rotate(0deg) saturate(1.6) contrast(1.25) brightness(0.85) sepia(0.7);
        }

        .evil-mode .mist {
            background: linear-gradient(0deg, 
                rgba(255,0,0,0.4) 0%, 
                rgba(255,69,0,0.2) 50%, 
                transparent 100%) !important;
            animation: evilMistMove 4s ease-in-out infinite;
        }

        @keyframes evilMistMove {
            0%, 100% { transform: translateX(0px) scale(1.1); opacity: 0.6; }
            50% { transform: translateX(-30px) scale(1.2); opacity: 0.8; }
        }

        /* Timer display */
        .timer {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            z-index: 20;
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .timer.warning {
            color: #FF6B6B;
            animation: timerPulse 0.5s ease-in-out infinite;
        }

        @keyframes timerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Game over screen - iPhone responsive */
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: clamp(24px, 5vw, 48px);
            text-shadow: 3px 3px 6px rgba(0,0,0,0.9);
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease-in-out;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            overflow-y: auto;
        }

        .game-over.show {
            opacity: 1;
            visibility: visible;
        }

        .game-over #gameOverText {
            max-width: 90%;
            line-height: 1.2;
            margin-bottom: 20px;
            word-wrap: break-word;
        }

        .game-over button {
            margin-top: 20px;
            padding: 15px 30px;
            font-size: clamp(16px, 4vw, 24px);
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
            min-width: 150px;
        }

        .game-over button:hover {
            background: #45a049;
        }

        /* iPhone specific fixes */
        @media (max-width: 480px) {
            .game-over {
                font-size: 20px;
                padding: 15px;
            }
            
            .game-over #gameOverText {
                max-width: 95%;
                line-height: 1.3;
            }
            
            .game-over button {
                font-size: 18px;
                padding: 12px 25px;
                margin-top: 15px;
            }
        }

        /* iPhone landscape mode */
        @media (max-height: 500px) and (orientation: landscape) {
            .game-over {
                font-size: 18px;
                padding: 10px;
            }
            
            .game-over #gameOverText {
                margin-bottom: 10px;
            }
            
            .game-over button {
                margin-top: 10px;
                padding: 10px 20px;
            }
        }

        /* Aunt photo styling - transparent PNG, wide movement, slower */
        .aunt-butterfly {
            width: 100px !important;
            height: 100px !important;
            background-image: url('myaunt.png');
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            /* No outline or glow to avoid any square edge appearance */
            outline: none;
            border: none;
            box-shadow: none;
            animation: wideErraticFloat 3s ease-in-out infinite !important;
            z-index: 12 !important;
            /* Prevent tap highlight on mobile (which can look like a square) */
            -webkit-tap-highlight-color: transparent;
        }

        .aunt-butterfly dotlottie-wc {
            display: none !important;
        }

        @keyframes wideErraticFloat {
            0% { 
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(1); 
            }
            10% { 
                transform: translateY(-80px) translateX(120px) rotate(25deg) scale(1.2); 
            }
            20% { 
                transform: translateY(-30px) translateX(-150px) rotate(-20deg) scale(0.8); 
            }
            30% { 
                transform: translateY(-120px) translateX(90px) rotate(15deg) scale(1.1); 
            }
            40% { 
                transform: translateY(-50px) translateX(-180px) rotate(-30deg) scale(0.9); 
            }
            50% { 
                transform: translateY(-100px) translateX(160px) rotate(10deg) scale(1.15); 
            }
            60% { 
                transform: translateY(-20px) translateX(-120px) rotate(-25deg) scale(0.85); 
            }
            70% { 
                transform: translateY(-90px) translateX(140px) rotate(18deg) scale(1.05); 
            }
            80% { 
                transform: translateY(-60px) translateX(-100px) rotate(-12deg) scale(0.95); 
            }
            90% { 
                transform: translateY(-110px) translateX(80px) rotate(22deg) scale(1.1); 
            }
            100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(1); 
            }
        }

        /* Victory image */
        .victory-image {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 150;
            max-width: 400px;
            max-height: 400px;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
            opacity: 0;
            visibility: hidden;
            transition: all 1s ease-in-out;
            animation: victoryFloat 3s ease-in-out infinite;
        }

        .victory-image.show {
            opacity: 1;
            visibility: visible;
        }

        @keyframes victoryFloat {
            0%, 100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
            50% { transform: translate(-50%, -55%) scale(1.05) rotate(2deg); }
        }

        /* Victory celebration effects */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 140;
            animation: confettiFall 3s ease-in-out infinite;
        }

        @keyframes confettiFall {
            0% { 
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% { 
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .confetti-gold { background: #FFD700; }
        .confetti-silver { background: #C0C0C0; }
        .confetti-red { background: #FF6B6B; }
        .confetti-blue { background: #4ECDC4; }
        .confetti-green { background: #45B7D1; }
    </style>
</head>
<body>
    <!-- Background Image Layer -->
    <div class="waterfall">
        <div class="bg-image"></div>
    </div>

    <!-- Mist Effect -->
    <div class="mist"></div>

    <!-- Timer Display -->
    <div class="timer" id="timer">Time: 15s</div>

    <!-- Game Over Screen -->
    <div class="game-over" id="gameOver">
        <div id="gameOverText">You didn't click fast enough!</div>
        <button onclick="restartGame()">Try Again</button>
    </div>

    <!-- Victory Image -->
    <img class="victory-image" id="victoryImage" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMTkwIiBmaWxsPSIjRkZENzAwIiBzdHJva2U9IiNGRkE1MDAiIHN0cm9rZS13aWR0aD0iMTAiLz4KPHN0YXIgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMTIwIiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNGRkE1MDAiIHN0cm9rZS13aWR0aD0iNSIvPgo8dGV4dCB4PSIyMDAiIHk9IjE0MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjQ4IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI0ZGQTUwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+PhTwvdGV4dD4KPHR5ZXh0IHg9IjIwMCIgeT0iMjEwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzYiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjRkZBNTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5WSUNUT1JZITwvdGV4dD4KPHR5ZXh0IHg9IjIwMCIgeT0iMjYwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNGRkE1MDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkV2aWwgQnV0dGVyZmx5PC90ZXh0Pgo8dGV4dCB4PSIyMDAiIHk9IjI5MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmaWxsPSIjRkZBNTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5EZWZFQVRFRCE8L3RleHQ+Cjwvc3ZnPgo=" alt="Victory Trophy" />

    <!-- Audio elements for sound effects -->
    <audio id="trumpetSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBzuZ3/LNeyUFl5vb8sGFTwsOGb/n9rJlFglJk/v1vWwyByKA3vq0hyYMIYHK7dt+OAGUkvv3t2Y0CBGUx+7VgkIFKHnJ7N2ARwMG" type="audio/wav">
    </audio>

    <!-- Butterflies will be generated by JavaScript -->

    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.8.1/dist/dotlottie-wc.js" type="module"></script>
    
    <script>
        const colors = ['orange', 'blue', 'pink', 'purple', 'green'];
        const butterflies = [];
        let evilButterflyIndex = -1;
        let gameTimer = 15;
        let timerInterval = null;
        let isGameActive = true;
        let isEvilMode = false;

        function createButterfly() {
            const butterfly = document.createElement('div');
            butterfly.className = `butterfly floating`;
            
            // Random starting position
            butterfly.style.left = Math.random() * (window.innerWidth - 80) + 'px';
            butterfly.style.top = Math.random() * (window.innerHeight - 80) + 'px';
            
            // Random animation duration and delay
            butterfly.style.animationDuration = (4 + Math.random() * 4) + 's';
            butterfly.style.animationDelay = Math.random() * 2 + 's';

            // Create Lottie butterfly
            const lottieButterfly = document.createElement('dotlottie-wc');
            lottieButterfly.setAttribute('src', 'https://lottie.host/ff8b8e58-bc7d-4e1d-a883-a4c8c028d9da/2nMrBFofQd.lottie');
            lottieButterfly.setAttribute('autoplay', '');
            lottieButterfly.setAttribute('loop', '');
            lottieButterfly.style.width = '60px';
            lottieButterfly.style.height = '60px';
            lottieButterfly.style.pointerEvents = 'none';
            
            // Random color filter for variety
            const colorFilters = [
                'hue-rotate(0deg)', // original
                'hue-rotate(60deg)', // different color
                'hue-rotate(120deg)', // another color
                'hue-rotate(180deg)', // opposite color
                'hue-rotate(240deg)', // another variation
                'hue-rotate(300deg)' // final variation
            ];
            lottieButterfly.style.filter = colorFilters[Math.floor(Math.random() * colorFilters.length)];
            
            butterfly.appendChild(lottieButterfly);
            document.body.appendChild(butterfly);
            butterflies.push(butterfly);

            // Add click interaction
            butterfly.addEventListener('click', function() {
                if (!isGameActive) return;
                
                const butterflyIndex = butterflies.indexOf(butterfly);
                
                if (butterflyIndex === evilButterflyIndex) {
                    // Clicked your aunt!
                    activateEvilMode();
                } else {
                    // Normal butterfly click
                    createSparkles(butterfly);
                    resetTimer();
                    
                    // Change color filter on click for variety
                    const lottieElement = butterfly.querySelector('dotlottie-wc');
                    if (lottieElement) {
                        const colorFilters = [
                            'hue-rotate(0deg)',
                            'hue-rotate(60deg)',
                            'hue-rotate(120deg)',
                            'hue-rotate(180deg)',
                            'hue-rotate(240deg)',
                            'hue-rotate(300deg)'
                        ];
                        lottieElement.style.filter = colorFilters[Math.floor(Math.random() * colorFilters.length)];
                    }
                }
            });

            return butterfly;
        }

        function createSparkles(butterfly) {
            for (let i = 0; i < 6; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                
                const rect = butterfly.getBoundingClientRect();
                sparkle.style.left = (rect.left + Math.random() * 40 - 10) + 'px';
                sparkle.style.top = (rect.top + Math.random() * 30 - 10) + 'px';
                sparkle.style.animationDelay = (i * 0.1) + 's';
                
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    sparkle.remove();
                }, 3000);
            }
        }

        function moveButterfly(butterfly) {
            const isAunt = butterfly.classList.contains('aunt-butterfly');
            const maxX = window.innerWidth - (isAunt ? 100 : 60);
            const maxY = window.innerHeight - (isAunt ? 100 : 60);
            
            // Keep aunt more centered to account for her wide movement pattern
            const minBound = isAunt ? 200 : 0;
            const maxBoundX = isAunt ? maxX - 200 : maxX;
            const maxBoundY = isAunt ? maxY - 150 : maxY;
            
            const newX = minBound + Math.random() * (maxBoundX - minBound);
            const newY = minBound/2 + Math.random() * (maxBoundY - minBound/2);
            
            butterfly.style.transition = 'all 3s ease-in-out';
            butterfly.style.left = newX + 'px';
            butterfly.style.top = newY + 'px';
        }

        function animateButterflies() {
            butterflies.forEach(butterfly => {
                if (Math.random() < 0.3) { // 30% chance to move
                    moveButterfly(butterfly);
                }
            });
        }

        function resetTimer() {
            gameTimer = 15;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            timerElement.textContent = `Time: ${gameTimer}s`;
            
            if (gameTimer <= 5) {
                timerElement.classList.add('warning');
            } else {
                timerElement.classList.remove('warning');
            }
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                if (!isGameActive || isEvilMode) return;
                
                gameTimer--;
                updateTimerDisplay();
                
                if (gameTimer <= 0) {
                    gameOver();
                }
            }, 1000);
        }

        function gameOver() {
            isGameActive = false;
            clearInterval(timerInterval);
            
            const gameOverScreen = document.getElementById('gameOver');
            const gameOverText = document.getElementById('gameOverText');
            
            gameOverText.textContent = "You didn't click fast enough! Your aunt escaped!";
            gameOverScreen.classList.add('show');
        }

        function activateEvilMode() {
            isGameActive = false;
            isEvilMode = true;
            clearInterval(timerInterval);
            
            // Hide timer
            document.getElementById('timer').style.display = 'none';
            
            // Play trumpet sound
            playTrumpetSound();
            
            // Create confetti effect
            createConfetti();
            
            // Show victory image immediately
            setTimeout(() => {
                document.getElementById('victoryImage').classList.add('show');
            }, 500);
            
            // Transform the scene
            document.body.classList.add('evil-mode');
            
            // Remove all butterflies with dramatic effect
            butterflies.forEach((butterfly, index) => {
                setTimeout(() => {
                    butterfly.style.transition = 'all 1s ease-out';
                    butterfly.style.transform = 'scale(0) rotate(720deg)';
                    butterfly.style.opacity = '0';
                    
                    setTimeout(() => {
                        if (butterfly.parentNode) {
                            butterfly.parentNode.removeChild(butterfly);
                        }
                    }, 1000);
                }, index * 100);
            });
            
            // Show evil victory message
            setTimeout(() => {
                const gameOverScreen = document.getElementById('gameOver');
                const gameOverText = document.getElementById('gameOverText');
                
                gameOverText.innerHTML = "🎉 CONGRATULATIONS! 🎉<br/>� You found your AUNT! �<br/>The waterfall has turned to LAVA!<br/>🏆 VICTORY IS YOURS! 🏆";
                gameOverScreen.classList.add('show');
            }, 2500);
        }

        function playTrumpetSound() {
            // Create multiple trumpet notes for a fanfare effect
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Trumpet fanfare notes (approximate frequencies)
            const notes = [261.63, 329.63, 392.00, 523.25, 659.25, 783.99]; // C, E, G, C, E, G
            
            notes.forEach((frequency, index) => {
                setTimeout(() => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                    oscillator.type = 'square'; // Trumpet-like sound
                    
                    gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                    gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.05);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                }, index * 150);
            });
            
            // Final triumphant chord
            setTimeout(() => {
                [261.63, 329.63, 392.00, 523.25].forEach((frequency, index) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                    oscillator.type = 'square';
                    
                    gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                    gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.1);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1.5);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 1.5);
                });
            }, 1000);
        }

        function createConfetti() {
            const colors = ['gold', 'silver', 'red', 'blue', 'green'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = `confetti confetti-${colors[Math.floor(Math.random() * colors.length)]}`;
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.animationDuration = (2 + Math.random() * 3) + 's';
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.parentNode.removeChild(confetti);
                        }
                    }, 5000);
                }, i * 50);
            }
        }

        function restartGame() {
            // Reset all game state
            isGameActive = true;
            isEvilMode = false;
            gameTimer = 15;
            evilButterflyIndex = -1;
            
            // Clear all butterflies
            butterflies.forEach(butterfly => {
                if (butterfly.parentNode) {
                    butterfly.parentNode.removeChild(butterfly);
                }
            });
            butterflies.length = 0;
            
            // Clear confetti
            const confettiElements = document.querySelectorAll('.confetti');
            confettiElements.forEach(confetti => {
                if (confetti.parentNode) {
                    confetti.parentNode.removeChild(confetti);
                }
            });
            
            // Reset visual state
            document.body.classList.remove('evil-mode');
            document.getElementById('timer').style.display = 'block';
            document.getElementById('gameOver').classList.remove('show');
            document.getElementById('victoryImage').classList.remove('show');
            
            // Restart the game
            initializeGame();
        }

        function selectEvilButterfly() {
            if (butterflies.length > 0) {
                evilButterflyIndex = Math.floor(Math.random() * butterflies.length);
                const evilButterfly = butterflies[evilButterflyIndex];
                evilButterfly.classList.add('aunt-butterfly');
                
                // Make aunt move with a slower but wide animation
                evilButterfly.style.animationDuration = '3s';
            }
        }

        function initializeGame() {
            // Create initial butterflies
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    createButterfly();
                    
                    // After all butterflies are created, select the evil one
                    if (i === 7) {
                        setTimeout(() => {
                            selectEvilButterfly();
                            startTimer();
                        }, 500);
                    }
                }, i * 500);
            }
        }

        // Start the game
        initializeGame();

        // Periodically move butterflies
        setInterval(animateButterflies, 4000);

        // Add new butterfly occasionally (only if game is active and not in evil mode)
        setInterval(() => {
            if (isGameActive && !isEvilMode && butterflies.length < 12 && Math.random() < 0.5) {
                createButterfly();
                // Reassign evil butterfly if needed
                if (evilButterflyIndex >= butterflies.length) {
                    selectEvilButterfly();
                }
            }
        }, 8000);

        // Handle window resize
        window.addEventListener('resize', () => {
            butterflies.forEach(butterfly => {
                const maxX = window.innerWidth - 40;
                const maxY = window.innerHeight - 30;
                
                if (parseInt(butterfly.style.left) > maxX) {
                    butterfly.style.left = maxX + 'px';
                }
                if (parseInt(butterfly.style.top) > maxY) {
                    butterfly.style.top = maxY + 'px';
                }
            });
        });

        // Add some ambient sparkles (only in normal mode)
        setInterval(() => {
            if (isGameActive && !isEvilMode) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * window.innerWidth + 'px';
                sparkle.style.top = Math.random() * window.innerHeight + 'px';
                sparkle.style.animationDelay = '0s';
                
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    sparkle.remove();
                }, 3000);
            }
        }, 2000);
    </script>
</body>
</html>